# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Базовый код
## Класс API
Отвечает за взаимодействие с сервером.

Свойства:
 - baseUrl: string;
 - options: RequestInit

Методы:
 - handleResponse(response: Response): возвращает ответ сервера в формате JSON и обрабатывает возникающие ошибки
 - get(uri: string) - возвращает информацию от сервера. Использует метод handleResponse()
 - post(uri: string, data: object, method: ApiPostMethods = 'POST') - отправляет данные на сервер и возвращает полученную информацию от сервера. Использует метод handleResponse()

## Класс EventEmitter
Отвечает за работу с событиями (является брокером-событий).

Методы:
  - on: устанавливает обработчик на событие;
  - off: снимает обработчик с события;
  - emit: инициирует событие с данными;
  - onAll: слушает все события;
  - offAll: сбрасывает всех обработчиков;
  - trigger: генерирует события с заданными аргументами при вызове


## Модели данных
## Класс CardsList
Отвечает за список всех карточек товаров.

Свойства:
 - cards: ICard[] - массив всех карточек

Методы:
 - getCard(id: string): получает данные карточки
 - addCard(data: ICard): добавляет данные карточки

## Класс Customer
Отвечает за данные покупателя.

Свойства:
 - paymentType: 'online' | 'offline' - способ оплаты;
 - address: string - адрес доставки;
 - email: string - E-mail покупателя;
 - phone: string - номер телефона;

Конструктор - пустой, не принимает свойства.

Методы:
 - setPaymentType(type: string): устанавливает способ оплаты;
 - setAddress(address: string): устанавливает адрес доставки;
 - setEmail(email: string): устанавливает E-mail покупателя;
 - setPhone(phone: string): устанавливает номер телефона;


## Класс Basket
Отвечает за работу корзины.

Свойства: 
 - items: ICardList - массив выбранных карточек

Геттеры:
 - сountItems: возвращает количество выбранных товаров
 - costItems: возвращает итоговую стоимость заказа

Методы:
 - getCardList: получает список выбранных товаров
 - addItem: добавление карточки
 - deleteItem: удаление карточки
 - clear: очищает корзину



## Модель представления

## PageUI 

[//]: # (Возможно, не нужно отдельно выделять шапку и оставить на уровне блоков. Выделить только изменение кол-ва товаров)

Отвечает за отображение основных элементов страницы: 
 - шапка страницы, включая логотип и корзину с количеством выбранных товаров;
 - основной каталог товаров

Свойства:
 - basket: BasketUI (или header: HTMLElement) - отображение корзины с количеством товаров (или всей шапки)
 - body: HTMLElement - каталог товаров

Методы:
 - render(body: HTMLElement, basket: BasketUI (или header: HTMLElement ? )): отображает страницу 
 - updateCountItems(countItems: number): обновляет информацию о количестве товаров в корзине

## Класс CardUI

Отвечает за отображение карточки в зависимости от переданного template (для главной страницы, для popup, для корзины)

Свойства:
 - template: HTMLElement - шаблон разметки для вывода карточки
 - card: ICard - данные карточки для отображения

Методы:
 - render(template: HTMLElement, card: ICard): отображает карточку товара согласно template

## Класс CardsListUI

Отображает список всех карточек в каталоге товаров.

Методы:

- render(cardList: ICardList): отобразить список карточек

## Класс PopupUI
Отвечает за отображение popup-элементов для следующих объектов: корзина, детальное описание карточки, данные пользователя для оформления заказа, информация об успешном оформлении заказа.
В качестве входных данных принимает заполненную template-разметку для отображения и событие на кнопке.

Свойства:
 - content: HTMLElement - содержимое popup;
 - event: void - событие, которое сработает при нажатии кнопки формы из content 
 - closeButton: HTMLElement - кнопка закрытия popup;
 - visible: boolean - видимость popup

Методы:
 - render(content: HTML): возвращает переданную template-разметку с данными;
 - open: открывает popup;
 - close: закрывает popup

## Класс BasketUI
Отвечает за отображение корзины с товарами. 
На вход принимает template для формирования элемента для popup и шапки главной страницы с отображением количества товаров в корзине.

Свойства:
 - template: HTMLElement - шаблон разметки;
 - basket: IBasket: данные корзины
 
Методы:
 - render: возвращает HTML на основе данных корзины из template-шаблона


## Взаимодействие данных и отображения
Взаимодействие отображения и данных между собой осуществляется при помощи реализации подписки и отслеживания событий через брокер-событий.

[//]: # (Требуется выделение класса для перечисленных функций? К какому слою требуется его отнести?)
Для управления состоянием приложения используются основные события:
 - обновление карточек каталога товаров;
 - выбор карточки товара (нажатие на карточку) с дальнейшим вызовом popup с данными карточки;
 - добавление товара в корзину (при нажатии кнопки "В корзину");
 - удаление товара из корзины (при нажатии кнопки "Удалить из корзины");
 - обновление содержимого корзины при добавлении/удалении товаров (в том числе суммы заказа и количества товаров);
 - переход на popup оформления заказа (при нажатии на кнопку "Оформить" или "Далее");
 - изменение типа оплаты;
 - изменение (ввод) данных в input-поля popup

